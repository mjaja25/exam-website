<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Letter Practice | Dream Centre</title>
    <link rel="stylesheet" href="css/main.css" />
    <script src="/auth.js" defer></script>
</head>

<body class="dashboard-page">
    <header class="test-header">
        <div class="logo">Letter <span>Practice Zone</span></div>
        <a href="/dashboard.html" class="nav-button secondary">Exit Practice</a>
    </header>

    <main class="practice-wrapper">
        <!-- TEST VIEW -->
        <div id="test-view">
            <div class="practice-header">
                <h2>âœ‰ï¸ Letter Writing Practice</h2>
                <div class="practice-timer">Time: <span id="timer">03:00</span></div>
            </div>

            <div class="card question-prompt" style="margin-bottom: 1.5rem;">
                <h3
                    style="margin: 0 0 0.5rem 0; color: var(--text-muted); font-size: 0.9rem; text-transform: uppercase;">
                    Question</h3>
                <p id="question-display" style="font-size: 1.05rem;">Loading question...</p>
            </div>

            <div class="editor-wrapper">
                <div class="editor-toolbar">
                    <button id="bold-btn" class="toolbar-btn"><b>B</b></button>
                    <button id="italic-btn" class="toolbar-btn"><i>I</i></button>
                    <button id="underline-btn" class="toolbar-btn"><u>U</u></button>
                    <select id="font-family-select" class="toolbar-select">
                        <option value="Arial">Arial</option>
                        <option value="Verdana">Verdana</option>
                        <option value="Times New Roman">Times New Roman</option>
                        <option value="Courier New">Courier New</option>
                    </select>
                    <select id="font-size-select" class="toolbar-select">
                        <option value="3">11pt</option>
                        <option value="1">8pt</option>
                        <option value="2">10pt</option>
                        <option value="4">12pt</option>
                        <option value="5">14pt</option>
                    </select>
                </div>
                <div id="user-input" class="text-editor" contenteditable="true" spellcheck="false"></div>
            </div>

            <div class="practice-actions" style="margin-bottom: 2rem; display: flex; justify-content: flex-end;">
                <button id="submit-btn" class="btn btn-primary">Submit for AI Grading</button>
            </div>
        </div>

        <!-- RESULTS VIEW -->
        <div id="results-view" class="results-view" style="display: none;">
            <div class="score-hero">
                <h2 id="results-title">Your Practice Score</h2>
                <div class="score-ring" id="score-ring">
                    <span class="score-value" id="score-value">0</span>
                </div>
                <p class="score-label" id="score-label">out of 10</p>
            </div>

            <div class="breakdown-grid" id="breakdown-grid" style="display: grid; gap: 1rem; margin-bottom: 2rem;">
            </div>

            <div class="action-buttons" style="display: flex; gap: 1rem; justify-content: center; flex-wrap: wrap;">
                <button class="btn btn-secondary" id="analyze-btn">ğŸ” Get Detailed AI Analysis</button>
                <button id="review-btn" class="btn btn-outline">ğŸ“„ Review Your Letter</button>
                <button onclick="location.reload()" class="btn btn-outline">ğŸ”„ Try Again</button>
                <button onclick="location.href='/dashboard.html'" class="btn btn-outline">ğŸ  Dashboard</button>
            </div>

            <div id="analysis-panel" class="analysis-panel">
                <h3>ğŸ¤– Detailed AI Analysis</h3>
                <div id="analysis-content"></div>
            </div>

            <div id="review-panel" class="card review-panel" style="display: none; margin-top: 1.5rem;">
                <h3 style="margin-bottom: 1rem;">ğŸ“„ Your Submitted Letter</h3>
                <div id="review-content" class="review-content"
                    style="border:1px solid var(--border-color); padding: 1rem; border-radius: 8px;"></div>
            </div>
        </div>
    </main>

    <div id="loading-overlay" class="loading-overlay" style="display: none;">
        <div class="spinner"></div>
        <p>AI is grading your letter...</p>
    </div>

    <script src="toast.js"></script>
    <script type="module" src="/js/pages/practice-letter.js"></script>
    <script src="theme-toggle.js"></script>
</body>

</html>