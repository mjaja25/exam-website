<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="Practice formal letter writing with AI-powered feedback in the Dream Centre Proficiency Portal.">
    <title>Letter Practice | Dream Centre</title>
    <link rel="icon" type="image/png" href="/logo.png">
    <link rel="stylesheet" href="css/main.css" />
    <script src="/auth.js" defer></script>
</head>

<body class="dashboard-page">
    <header class="test-header practice-header">
        <div class="logo">Letter <span>Practice Zone</span></div>
        <a href="/dashboard.html" class="nav-button secondary">Exit Practice</a>
    </header>

    <main class="practice-wrapper">
        <!-- TEST VIEW -->
        <div id="test-view">
            <div class="practice-header">
                <h2>Letter Writing Practice</h2>
                <div class="practice-timer">
                    <label for="timer-select" style="margin-right: 8px; font-size: 0.875rem;">Time Limit:</label>
                    <select id="timer-select" style="padding: 4px 8px; border-radius: 4px; margin-right: 12px;">
                        <option value="60">1 min</option>
                        <option value="120">2 min</option>
                        <option value="180" selected>3 min</option>
                        <option value="300">5 min</option>
                        <option value="600">10 min</option>
                        <option value="0">No Limit</option>
                    </select>
                    <span>Time:</span> <span id="timer">03:00</span>
                </div>
            </div>

            <div class="card question-prompt">
                <h3 class="question-label">Question</h3>
                <p id="question-display" class="question-text">Loading question...</p>
            </div>

            <div class="editor-wrapper">
                <div class="editor-toolbar">
                    <button id="bold-btn" class="toolbar-btn"><b>B</b></button>
                    <button id="italic-btn" class="toolbar-btn"><i>I</i></button>
                    <button id="underline-btn" class="toolbar-btn"><u>U</u></button>
                    <select id="font-family-select" class="toolbar-select">
                        <option value="Arial">Arial</option>
                        <option value="Verdana">Verdana</option>
                        <option value="Times New Roman">Times New Roman</option>
                        <option value="Courier New">Courier New</option>
                    </select>
                    <select id="font-size-select" class="toolbar-select">
                        <option value="3">11pt</option>
                        <option value="1">8pt</option>
                        <option value="2">10pt</option>
                        <option value="4">12pt</option>
                        <option value="5">14pt</option>
                    </select>
                </div>
                <div id="user-input" class="text-editor" contenteditable="true" spellcheck="false"></div>
            </div>

            <div class="practice-actions">
                <button id="submit-btn" class="btn btn-primary">Submit for AI Grading</button>
            </div>
        </div>

        <!-- RESULTS VIEW -->
        <div id="results-view" class="results-view">
            <div class="score-hero">
                <h2 id="results-title">Your Practice Score</h2>
                <div class="score-ring" id="score-ring">
                    <span class="score-value" id="score-value">0</span>
                </div>
                <p class="score-label" id="score-label">out of 10</p>
            </div>

            <div class="breakdown-grid" id="breakdown-grid">
            </div>

            <div class="action-buttons">
                <button class="btn btn-secondary" id="analyze-btn">Get Detailed AI Analysis</button>
                <button id="sample-answer-btn" class="btn btn-outline" style="display:none;">ðŸ“„ View Sample Answer</button>
                <button id="review-btn" class="btn btn-outline">Review Your Letter</button>
                <button id="retry-same-btn" class="btn btn-outline">ðŸ”„ Try Same Question</button>
                <button id="new-question-btn" class="btn btn-outline">ðŸŽ² New Question</button>
                <button onclick="location.href='/dashboard.html'" class="btn btn-outline">Dashboard</button>
            </div>

            <div id="analysis-panel" class="analysis-panel">
                <h3>Detailed AI Analysis</h3>
                <div id="analysis-content"></div>
            </div>

            <div id="sample-answer-panel" class="analysis-panel">
                <h3>ðŸ“„ Sample Answer</h3>
                <div id="sample-answer-content" style="white-space: pre-wrap; font-family: 'Times New Roman', serif; font-size: 1rem; line-height: 1.8;"></div>
            </div>

            <div id="review-panel" class="card review-panel">
                <h3 class="review-title">Your Submitted Letter</h3>
                <div id="review-content" class="review-content"></div>
            </div>
        </div>
    </main>

    <div id="loading-overlay" class="loading-overlay">
        <div class="spinner"></div>
        <p>AI is grading your letter...</p>
    </div>

    <script src="toast.js"></script>
    <script type="module" src="/js/pages/practice-letter.js"></script>
    <script src="theme-toggle.js"></script>
</body>

</html>
